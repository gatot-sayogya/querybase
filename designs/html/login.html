<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>QueryBase – Sign In</title>
    <link rel="stylesheet" href="shared.css" />
    <style>
      body {
        background: #0f172a;
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 24px;
      }

      /* Subtle background glow */
      body::before {
        content: "";
        position: fixed;
        top: -120px;
        left: 50%;
        transform: translateX(-20%);
        width: 640px;
        height: 640px;
        background: radial-gradient(
          circle,
          rgba(37, 99, 235, 0.25) 0%,
          transparent 70%
        );
        pointer-events: none;
      }

      .login-card {
        width: 100%;
        max-width: 420px;
        background: #fff;
        border-radius: var(--r-2xl);
        padding: 40px;
        display: flex;
        flex-direction: column;
        gap: 28px;
        position: relative;
        z-index: 1;
      }

      /* Logo row */
      .logo-row {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .logo-mark {
        width: 36px;
        height: 36px;
        background: var(--accent-blue);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        font-weight: 700;
        color: #fff;
        flex-shrink: 0;
      }
      .logo-name {
        font-size: 16px;
        font-weight: 700;
        color: var(--text-primary);
      }

      /* Title block */
      .title-block {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .title-block h1 {
        font-size: 26px;
        font-weight: 700;
        color: var(--text-primary);
      }
      .title-block p {
        font-size: 14px;
        color: var(--text-muted);
      }

      /* Form */
      .form-fields {
        display: flex;
        flex-direction: column;
        gap: 18px;
      }

      /* Button */
      .signin-btn {
        width: 100%;
        height: 48px;
        background: var(--accent-blue);
        color: #fff;
        border: none;
        border-radius: var(--r-lg);
        font-family: "Inter", sans-serif;
        font-size: 15px;
        font-weight: 700;
        cursor: pointer;
        transition: background 0.15s;
      }
      .signin-btn:hover { background: #1d4ed8; }
      .signin-btn:disabled { opacity: 0.6; cursor: not-allowed; }

      .card-footer {
        font-size: 12px;
        color: var(--text-faint);
        text-align: center;
        margin-top: -12px;
      }

      .error-msg {
        display: none;
        align-items: center;
        gap: 8px;
        padding: 12px 14px;
        background: #FEF2F2;
        border: 1px solid #FECACA;
        border-radius: 10px;
        font-size: 13px;
        color: #B91C1C;
        margin-top: -12px;
      }
      .error-msg.show { display: flex; }
    </style>
    <script>
    (function() {
      var saved = localStorage.getItem('qb_theme');
      var dark = saved === 'dark' || (!saved && window.matchMedia('(prefers-color-scheme: dark)').matches);
      if (dark) document.documentElement.classList.add('dark');
    })();
  </script>
</head>
  <body>
    <div class="login-card">
      <!-- Logo -->
      <div class="logo-row">
        <div class="logo-mark">Q</div>
        <span class="logo-name">QueryBase</span>
      </div>

      <!-- Title -->
      <div class="title-block">
        <h1>Welcome back</h1>
        <p>Sign in to your account to continue</p>
      </div>

      <!-- Form -->
      <div class="form-fields">
        <div class="form-group">
          <label class="form-label" for="username">Username</label>
          <input
            id="username"
            class="form-input"
            type="text"
            placeholder="Enter username"
            autocomplete="username"
          />
        </div>
        <div class="form-group">
          <label class="form-label" for="password">Password</label>
          <input
            id="password"
            class="form-input"
            type="password"
            placeholder="••••••••"
            autocomplete="current-password"
          />
        </div>
      </div>

      <!-- Error message -->
      <div class="error-msg" id="errorMsg">
        ⚠ Invalid username or password. Please try again.
      </div>

      <!-- CTA -->
      <button class="signin-btn" id="signInBtn" onclick="handleLogin()">Sign in</button>

      <!-- Footer -->
      <p class="card-footer">Secure database access for your team</p>

      <script>
        // Allow Enter key to submit from any input
        document.querySelectorAll('.form-input').forEach(function(el) {
          el.addEventListener('keydown', function(e) {
            if (e.key === 'Enter') handleLogin();
          });
        });

        function handleLogin() {
          var username = document.getElementById('username').value.trim();
          var password = document.getElementById('password').value;
          var errEl   = document.getElementById('errorMsg');
          var btn     = document.getElementById('signInBtn');

          errEl.classList.remove('show');

          if (!username || !password) {
            errEl.querySelector('span') && (errEl.textContent = '');
            errEl.textContent = '⚠ Please enter your username and password.';
            errEl.classList.add('show');
            return;
          }

          // Simulate login — accept any non-empty credentials
          btn.disabled = true;
          btn.textContent = 'Signing in…';

          // Store basic session info for the dashboard to read
          sessionStorage.setItem('qb_user', JSON.stringify({
            username: username,
            fullName: username === 'admin' ? 'Admin User' : username,
            role:     username === 'admin' ? 'admin' : 'user',
            loginTime: new Date().toISOString()
          }));

          setTimeout(function() {
            window.location.href = 'dashboard.html';
          }, 600);
        }
      </script>
    </div>
  </body>
</html>
