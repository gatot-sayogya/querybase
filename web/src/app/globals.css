@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================
   QueryBase Design System – Shared CSS
   Design tokens replicated from designs/experiment.pen
   ============================================================ */

@import url("https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap");

*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

:root {
  /* Colors */
  --bg-page: #f8fafc;
  --bg-dark: #0f172a;
  --sidebar-bg: #0f172a;
  --sidebar-logo: #1e293b;
  --nav-active: #1e3a5f;
  --accent-blue: #2563eb;
  --accent-light: #eff6ff;
  --text-primary: #0f172a;
  --text-muted: #64748b;
  --text-faint: #94a3b8;
  --border: #e2e8f0;
  --border-light: #f1f5f9;
  --card-bg: #ffffff;
  --input-bg: #f8fafc;

  /* Status */
  --green-bg: #ecfdf5;
  --green-text: #059669;
  --red-bg: #fff1f2;
  --red-text: #dc2626;
  --red-border: #fca5a5;
  --amber-bg: #fef3c7;
  --amber-text: #92400e;
  --blue-bg: #eff6ff;
  --blue-text: #1d4ed8;
  --purple-bg: #ede9fe;
  --purple-text: #4f46e5;
  --slate-bg: #f1f5f9;
  --slate-text: #475569;

  /* Spacing & shape */
  --r-sm: 6px;
  --r-md: 10px;
  --r-lg: 12px;
  --r-xl: 16px;
  --r-2xl: 24px;
  --sidebar-w: 68px;
}

:root.dark {
  --bg-page: #111827;           /* gray-900 */
  --bg-dark: #030712;           /* gray-950 */
  --sidebar-bg: #0f172a;        /* slate-900 */
  --sidebar-logo: #020617;      /* slate-950 */
  --nav-active: #1e293b;        /* slate-800 */
  --accent-blue: #3b82f6;       /* blue-500 */
  --accent-light: #1e3a8a;      /* blue-900 */
  --text-primary: #f8fafc;      /* slate-50 */
  --text-muted: #94a3b8;        /* slate-400 */
  --text-faint: #475569;        /* slate-600 */
  --border: #334155;            /* slate-700 */
  --border-light: #1e293b;      /* slate-800 */
  --card-bg: #1f2937;           /* gray-800 */
  --input-bg: #111827;          /* gray-900 */

  /* Status overrides for dark mode */
  --green-bg: rgba(5, 150, 105, 0.2);
  --green-text: #34d399;
  --red-bg: rgba(220, 38, 38, 0.2);
  --red-text: #f87171;
  --red-border: #991b1b;
  --amber-bg: rgba(217, 119, 6, 0.2);
  --amber-text: #fbbf24;
  --blue-bg: rgba(37, 99, 235, 0.2);
  --blue-text: #60a5fa;
  --purple-bg: rgba(79, 70, 229, 0.2);
  --purple-text: #818cf8;
  --slate-bg: rgba(71, 85, 105, 0.2);
  --slate-text: #cbd5e1;
}

/* ── Avatar menu dark mode overrides ──────────────── */
:root.dark .avatar-menu,
:root.dark .settings-menu {
  background: var(--card-bg);
  border-color: var(--border);
}

body {
  font-family: "Inter", sans-serif;
  color: var(--text-primary);
  background: var(--bg-page);
  transition: background-color 0.2s, color 0.2s;
}

/* ── Sidebar ───────────────────────────────── */
.sidebar {
  width: var(--sidebar-w);
  min-height: 100vh;
  background: var(--sidebar-bg);
  display: flex;
  flex-direction: column;
  align-items: center;
  flex-shrink: 0;
}
.sidebar-logo {
  width: 100%;
  height: 68px;
  background: var(--sidebar-logo);
  display: flex;
  align-items: center;
  justify-content: center;
  border-bottom: 1px solid #1e293b;
}
.sidebar-mark {
  width: 34px;
  height: 34px;
  background: var(--accent-blue);
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 17px;
  font-weight: 700;
  color: #fff;
  user-select: none;
}
.sidebar-nav {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  padding: 10px;
  width: 100%;
}
.nav-item {
  width: 46px;
  height: 46px;
  border-radius: var(--r-lg);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 18px;
  color: var(--text-muted);
  cursor: pointer;
  transition: background 0.15s, color 0.15s;
  text-decoration: none;
  position: relative;
}
.nav-item:hover {
  background: #1e293b;
  color: #cbd5e1;
}
.nav-item.active {
  background: var(--nav-active);
  color: #93c5fd;
}

/* Tooltip that pops to the right on hover */
.nav-item[data-tooltip]::after {
  content: attr(data-tooltip);
  position: absolute;
  left: calc(100% + 12px);
  top: 50%;
  transform: translateY(-50%) translateX(-4px);
  background: #1e293b;
  color: #e2e8f0;
  font-size: 12px;
  font-weight: 500;
  font-family: "Inter", sans-serif;
  white-space: nowrap;
  padding: 6px 10px;
  border-radius: 8px;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s, transform 0.15s;
  z-index: 999;
  box-shadow: 0 4px 12px rgba(0,0,0,0.25);
}
.nav-item[data-tooltip]:hover::after {
  opacity: 1;
  transform: translateY(-50%) translateX(0);
}
/* Small left-pointing arrow on the tooltip */
.nav-item[data-tooltip]::before {
  content: "";
  position: absolute;
  left: calc(100% + 6px);
  top: 50%;
  transform: translateY(-50%) translateX(-4px);
  border: 5px solid transparent;
  border-right-color: #1e293b;
  pointer-events: none;
  opacity: 0;
  transition: opacity 0.15s, transform 0.15s;
  z-index: 999;
}
.nav-item[data-tooltip]:hover::before {
  opacity: 1;
  transform: translateY(-50%) translateX(0);
}
/* Settings submenu popup */
.settings-wrapper {
  position: relative;
  width: 46px;
  display: flex;
  align-items: center;
  justify-content: center;
}
/* Invisible bridge that fills the gap between the button and the fixed popup,
   so hovering across the gap keeps the :hover state alive */
.settings-wrapper::after {
  content: '';
  position: absolute;
  left: 100%;
  top: -4px;
  bottom: -4px;
  width: 20px;
}

.settings-menu {
  position: fixed;
  left: calc(var(--sidebar-w) + 10px);
  bottom: 72px;
  width: 210px;
  background: #fff;
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  box-shadow: 0 8px 32px rgba(0,0,0,0.14), 0 2px 8px rgba(0,0,0,0.08);
  padding: 6px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  z-index: 1001;
  opacity: 0;
  pointer-events: none;
  transform: translateY(6px);
  transition: opacity 0.15s, transform 0.15s;
}
/* Show on hover of wrapper OR when mouse is over the menu itself */
.settings-wrapper:hover .settings-menu,
.settings-menu:hover {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}
.settings-menu-label {
  padding: 8px 12px 6px;
  font-size: 11px;
  font-weight: 700;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--text-faint);
  border-bottom: 1px solid var(--border-light);
  margin-bottom: 4px;
}
.settings-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  border-radius: var(--r-md);
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  text-decoration: none;
  cursor: pointer;
  transition: background 0.12s;
}
.settings-item:hover { background: var(--bg-page); }
:root.dark .settings-item:hover { background: var(--bg-dark); }
.settings-item.active-page { background: var(--accent-light); color: var(--accent-blue); }
.settings-icon {
  width: 28px; height: 28px;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  flex-shrink: 0;
  font-size: 14px;
}

.sidebar-bottom {
  width: 100%;
  padding: 10px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  border-top: 1px solid #1e293b;
}
.sidebar-avatar {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: #4f46e5;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 700;
  color: #fff;
}

/* ── Avatar popup menu ───────────────────────── */
.avatar-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}
/* Invisible bridge that fills the gap between the button and the fixed popup */
.avatar-wrapper::after {
  content: '';
  position: absolute;
  left: 100%;
  top: -4px;
  bottom: -4px;
  width: 20px;
}
.avatar-btn {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  background: #4f46e5;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  font-weight: 700;
  color: #fff;
  cursor: pointer;
  border: 2px solid transparent;
  transition: border-color 0.15s, transform 0.15s;
  user-select: none;
}
.avatar-btn:hover, .avatar-wrapper:hover .avatar-btn { border-color: rgba(255,255,255,0.3); transform: scale(1.05); }

.avatar-menu {
  position: fixed;
  bottom: 20px;
  left: calc(var(--sidebar-w) + 10px);
  width: 220px;
  background: #fff;
  border: 1px solid var(--border);
  border-radius: var(--r-xl);
  box-shadow: 0 8px 32px rgba(0,0,0,0.14), 0 2px 8px rgba(0,0,0,0.08);
  padding: 6px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  z-index: 1000;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.15s, transform 0.15s;
  transform: translateY(6px);
}
.avatar-wrapper:hover .avatar-menu,
.avatar-menu:hover {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

/* User info row at top of menu */
.menu-user-info {
  padding: 10px 12px 8px;
  border-bottom: 1px solid var(--border-light);
  margin-bottom: 4px;
}
.menu-user-name {
  font-size: 13px;
  font-weight: 700;
  color: var(--text-primary);
}
.menu-user-role {
  font-size: 11px;
  color: var(--text-muted);
  margin-top: 2px;
}

/* Menu items */
.menu-item {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 9px 12px;
  border-radius: var(--r-md);
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
  text-decoration: none;
  cursor: pointer;
  transition: background 0.12s;
  border: none;
  background: none;
  width: 100%;
  text-align: left;
  font-family: "Inter", sans-serif;
}
.menu-item:hover { background: var(--bg-page); }

:root.dark .menu-item:hover { background: var(--bg-dark); }
:root.dark .menu-divider { background: var(--border); }

.menu-item .menu-icon {
  width: 28px; height: 28px;
  border-radius: 8px;
  display: flex; align-items: center; justify-content: center;
  font-size: 14px;
  flex-shrink: 0;
}

.menu-divider {
  height: 1px;
  background: var(--border-light);
  margin: 4px 0;
}
.menu-item.danger { color: var(--red-text); }
.menu-item.danger .menu-icon { background: var(--red-bg); }
.menu-item.danger:hover { background: #fff5f5; }


/* ── App Shell ──────────────────────────────── */
.app-shell {
  display: flex;
  min-height: 100vh;
}
.main-content {
  flex: 1;
  padding: 32px;
  display: flex;
  flex-direction: column;
  gap: 24px;
  overflow: auto;
}

/* ── Cards ──────────────────────────────────── */
.card {
  background: var(--card-bg);
  border-radius: var(--r-xl);
  border: 1px solid var(--border-light);
}
.card-padded {
  padding: 24px;
}

/* ── Page Header ────────────────────────────── */
.page-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
}
.page-title {
  font-size: 22px;
  font-weight: 700;
  color: var(--text-primary);
}
.page-subtitle {
  font-size: 14px;
  color: var(--text-muted);
  margin-top: 4px;
}

/* ── Buttons ─────────────────────────────────── */
.btn {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 40px;
  padding: 0 16px;
  border-radius: var(--r-lg);
  border: none;
  font-family: "Inter", sans-serif;
  font-size: 13px;
  font-weight: 700;
  cursor: pointer;
  transition: opacity 0.15s;
  text-decoration: none;
}
.btn:hover {
  opacity: 0.88;
}
.btn-primary {
  background: var(--accent-blue);
  color: #fff;
}
.btn-ghost {
  background: var(--slate-bg);
  color: var(--text-primary);
  border: 1px solid var(--border);
}
.btn-danger {
  background: var(--red-bg);
  color: var(--red-text);
  border: 1px solid var(--red-border);
}
.btn-success {
  background: #059669;
  color: #fff;
}
.btn-sm {
  height: 32px;
  padding: 0 12px;
  font-size: 12px;
  font-weight: 500;
}

/* ── Badges ──────────────────────────────────── */
.badge {
  display: inline-flex;
  align-items: center;
  height: 22px;
  padding: 0 8px;
  border-radius: var(--r-sm);
  font-size: 11px;
  font-weight: 500;
}
.badge-green {
  background: var(--green-bg);
  color: var(--green-text);
}
.badge-red {
  background: var(--red-bg);
  color: var(--red-text);
}
.badge-amber {
  background: var(--amber-bg);
  color: var(--amber-text);
}
.badge-blue {
  background: var(--blue-bg);
  color: var(--blue-text);
}
.badge-purple {
  background: var(--purple-bg);
  color: var(--purple-text);
}
.badge-slate {
  background: var(--slate-bg);
  color: var(--slate-text);
}

/* ── Tables ──────────────────────────────────── */
.data-table {
  width: 100%;
  border-collapse: collapse;
}
.data-table thead th {
  padding: 10px 16px;
  text-align: left;
  font-size: 11px;
  font-weight: 700;
  color: var(--text-faint);
  letter-spacing: 0.04em;
  text-transform: uppercase;
  background: var(--bg-page);
  border-bottom: 1px solid var(--border-light);
}
.data-table tbody td {
  padding: 14px 16px;
  font-size: 13px;
  border-bottom: 1px solid var(--border-light);
  vertical-align: middle;
  transition: background-color 0.12s;
}
.data-table tbody tr:hover td {
  background: var(--blue-bg);
}
.data-table tbody tr:last-child td {
  border-bottom: none;
}
:root.dark .data-table thead th {
  color: #fff;
}

/* Compact tables */
.data-table.compact thead th {
  padding: 6px 12px;
}
.data-table.compact tbody td {
  padding: 4px 12px;
}

/* ── Inputs ──────────────────────────────────── */
.form-group {
  display: flex;
  flex-direction: column;
  gap: 6px;
}
.form-label {
  font-size: 13px;
  font-weight: 500;
  color: var(--text-primary);
}
.form-input {
  width: 100%;
  height: 44px;
  padding: 0 12px;
  background: var(--input-bg);
  border: 1px solid var(--border);
  border-radius: var(--r-md);
  font-family: "Inter", sans-serif;
  font-size: 14px;
  color: var(--text-primary);
  outline: none;
  transition: border-color 0.15s;
}
.form-input:focus {
  border-color: var(--accent-blue);
  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.15);
}
.form-input::placeholder {
  color: var(--text-faint);
}

/* ── Code Block ──────────────────────────────── */
.code-block {
  background: var(--bg-dark);
  border-radius: var(--r-lg);
  padding: 16px 20px;
  font-family: "Courier New", monospace;
  font-size: 13px;
  color: #e2e8f0;
  line-height: 1.7;
}
.code-keyword {
  color: #93c5fd;
}
.code-string {
  color: #86efac;
}
.code-line-no {
  color: #475569;
  display: inline-block;
  width: 20px;
  margin-right: 12px;
  user-select: none;
}


/* Extracted from profile.html */
.profile-grid {
      display: grid;
      grid-template-columns: 300px 1fr;
      gap: 24px;
      align-items: start;
    }

    /* ── Left column: user card ─────────────────── */
    .user-card {
      display: flex;
      flex-direction: column;
      gap: 0;
      overflow: hidden;
    }
    .user-card-top {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 14px;
      padding: 32px 24px 24px;
      border-bottom: 1px solid var(--border-light);
    }
    .avatar-large {
      width: 80px; height: 80px; border-radius: 50%;
      background: linear-gradient(135deg, #4F46E5, #2563EB);
      display: flex; align-items: center; justify-content: center;
      font-size: 32px; font-weight: 700; color: #fff;
      letter-spacing: -1px;
    }
    .user-name  { font-size: 18px; font-weight: 700; color: var(--text-primary); text-align: center; }
    .user-email { font-size: 13px; color: var(--text-muted); text-align: center; margin-top: -6px; }
    .user-role-badge { margin-top: 4px; }

    .user-meta { padding: 20px 24px; display: flex; flex-direction: column; gap: 14px; }
    .meta-row {
      display: flex; justify-content: space-between; align-items: center;
      font-size: 13px;
    }
    .meta-label { color: var(--text-muted); font-weight: 500; }
    .meta-value { color: var(--text-primary); font-weight: 500; }

    /* ── Right column ────────────────────────────── */
    .right-col { display: flex; flex-direction: column; gap: 24px; }

    /* Tab Nav */
    .tab-nav {
      display: flex;
      border-bottom: 1px solid var(--border-light);
      gap: 0;
      margin-bottom: 24px;
    }
    .tab-btn {
      padding: 10px 20px;
      font-size: 14px; font-weight: 500;
      color: var(--text-muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      background: none; border-top: none; border-left: none; border-right: none;
      font-family: 'Inter', sans-serif;
      transition: color 0.15s, border-color 0.15s;
    }
    .tab-btn:hover { color: var(--text-primary); }
    .tab-btn.active { color: var(--accent-blue); border-bottom-color: var(--accent-blue); }

    /* Sections */
    .section { display: none; flex-direction: column; gap: 24px; }
    .section.active { display: flex; }

    /* Form card */
    .form-card { padding: 28px; }
    .form-card-title { font-size: 16px; font-weight: 700; color: var(--text-primary); margin-bottom: 4px; }
    .form-card-sub   { font-size: 13px; color: var(--text-muted); margin-bottom: 22px; }
    .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .form-row.single { grid-template-columns: 1fr; }
    .form-actions {
      display: flex; justify-content: flex-end; gap: 10px;
      margin-top: 24px; padding-top: 20px;
      border-top: 1px solid var(--border-light);
    }

    /* Password strength */
    .pw-strength { margin-top: 8px; }
    .pw-bar-track { height: 4px; background: var(--border-light); border-radius: 99px; overflow: hidden; }
    .pw-bar-fill  { height: 100%; border-radius: 99px; transition: width 0.3s, background 0.3s; width: 0; }
    .pw-hint { font-size: 11px; color: var(--text-muted); margin-top: 4px; }

    /* Groups section */
    .group-list { display: flex; flex-direction: column; gap: 10px; }
    .group-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 20px;
      border-radius: var(--r-lg);
      border: 1px solid var(--border-light);
      background: var(--card-bg);
    }
    .group-item-left { display: flex; align-items: center; gap: 12px; }
    .group-icon-sm {
      width: 38px; height: 38px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 15px; flex-shrink: 0;
    }
    .group-name { font-size: 14px; font-weight: 600; color: var(--text-primary); }
    .group-desc { font-size: 12px; color: var(--text-muted); margin-top: 2px; }

    /* DB access list */
    .db-list { display: flex; flex-direction: column; gap: 10px; }
    .db-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 14px 20px;
      border-radius: var(--r-lg);
      border: 1px solid var(--border-light);
      background: var(--card-bg);
    }
    .db-item-left { display: flex; align-items: center; gap: 14px; }
    .db-type-icon {
      width: 38px; height: 38px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 15px; flex-shrink: 0;
    }
    .db-name   { font-size: 14px; font-weight: 600; color: var(--text-primary); }
    .db-host   { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
    .db-perms  { display: flex; gap: 6px; flex-wrap: wrap; }

    /* Notif / Toast */
    .toast {
      position: fixed; bottom: 28px; right: 28px;
      background: #0F172A; color: #fff;
      padding: 14px 20px; border-radius: var(--r-lg);
      font-size: 13px; display: flex; align-items: center; gap: 10px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.25);
      opacity: 0; pointer-events: none;
      transform: translateY(8px);
      transition: opacity 0.25s, transform 0.25s;
      z-index: 1000;
    }
    .toast.show { opacity: 1; pointer-events: auto; transform: translateY(0); }
    .toast-icon { font-size: 16px; }

/* Extracted from admin-datasources.html */
.ds-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 20px; }
    .ds-card { padding: 24px; display: flex; flex-direction: column; gap: 16px; }
    .ds-card-head { display: flex; align-items: center; gap: 12px; }
    .ds-icon {
      width: 44px; height: 44px; border-radius: var(--r-lg);
      display: flex; align-items: center; justify-content: center;
      font-size: 20px; flex-shrink: 0;
    }
    .ds-icon-pg   { background: #DBEAFE; color: #1D4ED8; }
    .ds-icon-mysql { background: #DCFCE7; color: #166534; }
    .ds-icon-redis { background: #FEE2E2; color: #B91C1C; }
    .ds-card-name { font-size: 15px; font-weight: 700; color: var(--text-primary); }
    .ds-card-type { font-size: 12px; color: var(--text-muted); margin-top: 2px; }
    .ds-divider   { height: 1px; background: var(--border-light); }
    .ds-host      { font-size: 12px; color: var(--text-muted); }
    .ds-actions   { display: flex; gap: 8px; justify-content: flex-end; }
    .conn-status  { display: flex; align-items: center; gap: 6px; font-size: 12px; color: var(--green-text); }
    .conn-dot     { width: 7px; height: 7px; border-radius: 50%; background: var(--green-text); }

/* Extracted from admin-users.html */
.user-avatar-cell { display: flex; align-items: center; gap: 10px; }
    .user-avatar-sm {
      width: 34px; height: 34px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      font-size: 14px; font-weight: 700; color: #fff; flex-shrink: 0;
    }

/* Extracted from admin-groups.html */
.group-icon-cell { display: flex; align-items: center; gap: 10px; }
    .group-icon {
      width: 34px; height: 34px; border-radius: 9px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px; flex-shrink: 0;
    }

/* Extracted from approvals.html */
.approvals-grid { display: grid; grid-template-columns: 442px 1fr; gap: 20px; flex: 1; min-height: 0; }

    /* List column */
    .approval-list { display: flex; flex-direction: column; overflow: hidden; }
    .list-title { font-size: 15px; font-weight: 700; color: var(--text-primary); padding: 0 0 14px 0; }
    .request-items { display: flex; flex-direction: column; gap: 8px; overflow-y: auto; }

    .request-item {
      padding: 14px;
      border-radius: var(--r-lg);
      background: var(--bg-page);
      border: 1px solid var(--border-light);
      cursor: pointer;
      transition: border-color 0.12s, background 0.12s;
    }
    .request-item.active {
      background: var(--blue-bg);
      border-color: var(--blue-text);
    }
    .request-item:hover:not(.active) { border-color: var(--border); background: var(--blue-bg); }

    .req-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 6px; }
    .req-op   { font-size: 13px; font-weight: 700; color: var(--text-primary); }
    .req-user { font-size: 12px; color: var(--text-muted); }

    /* Detail column */
    .detail-col { display: flex; flex-direction: column; overflow: hidden; }
    .detail-header {
      display: flex; justify-content: space-between; align-items: flex-start;
      margin-bottom: 20px;
    }
    .detail-title { font-size: 18px; font-weight: 700; color: var(--text-primary); }
    .detail-section-label { font-size: 12px; font-weight: 600; color: var(--text-muted); margin-bottom: 8px; text-transform: uppercase; letter-spacing: 0.04em; }
    .detail-actions {
      display: flex; justify-content: flex-end; gap: 12px;
      margin-top: 20px;
    }

    .comment-area {
      width: 100%; border: 1px solid var(--border);
      border-radius: var(--r-md); padding: 12px;
      font-family: 'Inter', sans-serif; font-size: 13px; color: var(--text-primary);
      background: var(--input-bg); resize: vertical; min-height: 80px;
      outline: none;
    }
    .comment-area:focus { border-color: var(--accent-blue); }

/* Extracted from login.html */
      .login-card {
        width: 100%;
        max-width: 420px;
        background: var(--bg-page);
        border: 1px solid var(--border-light);
        border-radius: var(--r-2xl);
        padding: 40px;
        display: flex;
        flex-direction: column;
        gap: 28px;
        position: relative;
        z-index: 1;
      }

      /* Logo row */
      .logo-row {
        display: flex;
        align-items: center;
        gap: 10px;
      }
      .logo-mark {
        width: 36px;
        height: 36px;
        background: var(--accent-blue);
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        font-weight: 700;
        color: #fff;
        flex-shrink: 0;
      }
      .logo-name {
        font-size: 16px;
        font-weight: 700;
        color: var(--text-primary);
      }

      /* Title block */
      .title-block {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }
      .title-block h1 {
        font-size: 26px;
        font-weight: 700;
        color: var(--text-primary);
      }
      .title-block p {
        font-size: 14px;
        color: var(--text-muted);
      }

      /* Form */
      .form-fields {
        display: flex;
        flex-direction: column;
        gap: 18px;
      }

      /* Button */
      .signin-btn {
        width: 100%;
        height: 48px;
        background: var(--accent-blue);
        color: #fff;
        border: none;
        border-radius: var(--r-lg);
        font-family: "Inter", sans-serif;
        font-size: 15px;
        font-weight: 700;
        cursor: pointer;
        transition: background 0.15s;
      }
      .signin-btn:hover { background: #1d4ed8; }
      .signin-btn:disabled { opacity: 0.6; cursor: not-allowed; }

      .card-footer {
        font-size: 12px;
        color: var(--text-faint);
        text-align: center;
        margin-top: -12px;
      }

      .error-msg {
        display: none;
        align-items: center;
        gap: 8px;
        padding: 12px 14px;
        background: #FEF2F2;
        border: 1px solid #FECACA;
        border-radius: 10px;
        font-size: 13px;
        color: #B91C1C;
        margin-top: -12px;
      }
      .error-msg.show { display: flex; }

/* Extracted from dashboard.html */
/* Stats grid: 5 cards for admin, 3 for user */
    .stats-row { display: grid; gap: 16px; }
    .stats-row.admin-view { grid-template-columns: repeat(5, 1fr); }
    .stats-row.user-view  { grid-template-columns: repeat(3, 1fr); }

    .stat-card { padding: 20px; display: flex; flex-direction: column; gap: 10px; }
    .stat-top { display: flex; align-items: flex-start; justify-content: space-between; }
    .stat-icon {
      width: 36px; height: 36px; border-radius: 10px;
      display: flex; align-items: center; justify-content: center;
      font-size: 16px; flex-shrink: 0;
    }
    .stat-label { font-size: 12px; font-weight: 500; color: var(--text-muted); }
    .stat-value { font-size: 28px; font-weight: 700; color: var(--text-primary); letter-spacing: -0.5px; }
    .stat-value.danger { color: var(--red-text); }

    /* Admin-only section */
    .admin-section { display: none; }
    .admin-section.visible { display: flex; flex-direction: column; gap: 16px; }

    /* Activity list */
    .section-header {
      display: flex; justify-content: space-between; align-items: center;
      padding: 20px 20px 0 20px;
    }
    .section-title { font-size: 15px; font-weight: 700; color: var(--text-primary); }
    .view-all { font-size: 13px; color: var(--accent-blue); text-decoration: none; }
    .view-all:hover { text-decoration: underline; }

    .activity-list { display: flex; flex-direction: column; }
    .activity-item {
      display: flex; align-items: center; gap: 14px;
      padding: 14px 16px;
      border-bottom: 1px solid var(--border-light);
    }
    .activity-item:last-child { border-bottom: none; }
    .activity-dot { width: 8px; height: 8px; border-radius: 50%; flex-shrink: 0; }
    .dot-green { background: var(--green-text); }
    .dot-amber { background: #D97706; }
    .dot-red   { background: #DC2626; }
    .activity-query { font-size: 13px; font-weight: 500; color: var(--text-primary); flex: 1;
                      overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width: 500px; }
    .activity-meta  { font-size: 12px; color: var(--text-muted); white-space: nowrap; }

    /* Admin system summary */
    .sys-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .sys-item {
      display: flex; align-items: center; justify-content: space-between;
      padding: 12px 16px; border-bottom: 1px solid var(--border-light);
    }
    .sys-item:last-child { border-bottom: none; }
    .sys-label { font-size: 13px; color: var(--text-muted); }
    .sys-val   { font-size: 13px; font-weight: 600; color: var(--text-primary); }

/* Extracted from query-editor.html */

    /* Schema panel – light white/gray theme */
    .schema-panel {
      width: 240px;
      background: #FFFFFF;
      border-right: 1px solid var(--border-light);
      display: flex;
      flex-direction: column;
      flex-shrink: 0;
      height: 100%;
    }
    .schema-title {
      display: flex; align-items: center; gap: 10px;
      height: 56px; padding: 0 16px;
      border-bottom: 1px solid var(--border-light);
    }
    .schema-title span { font-size: 13px; font-weight: 700; color: var(--text-primary); }
    .schema-icon { font-size: 16px; color: var(--text-muted); }

    .ds-dropdown {
      display: flex; align-items: center; justify-content: space-between;
      padding: 10px 14px; background: var(--bg-page);
      font-size: 13px; color: var(--text-primary); cursor: pointer;
      border: 1px solid var(--border); border-radius: var(--r-md);
      margin: 10px 10px 4px;
      transition: border-color 0.12s;
    }
    .ds-dropdown:hover { border-color: #94A3B8; }

    .table-list { padding: 8px; display: flex; flex-direction: column; gap: 2px; flex: 1; overflow-y: auto; }
    .table-item {
      display: flex; align-items: center; gap: 10px;
      height: 36px; padding: 0 10px;
      border-radius: 8px; cursor: pointer; transition: background 0.12s;
    }
    .table-item:hover { background: var(--bg-page); }
    .table-item.active { background: var(--blue-bg); }
    .table-icon { font-size: 14px; }
    .table-icon.active { color: var(--accent-blue); }
    .table-icon.muted   { color: #CBD5E1; }
    .table-name { font-size: 13px; color: var(--text-primary); }
    .table-name.muted   { color: var(--text-muted); }

    /* Editor panel */
    .editor-panel { flex: 1; display: flex; flex-direction: column; overflow: hidden; }

    .editor-toolbar {
      height: 52px; padding: 0 16px;
      display: flex; align-items: center; justify-content: space-between;
      background: #fff; border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }
    .toolbar-left { display: flex; gap: 10px; align-items: center; }
    .toolbar-right { display: flex; gap: 8px; align-items: center; }

    .db-chip {
      display: flex; align-items: center; gap: 6px;
      height: 30px; padding: 0 10px;
      background: var(--blue-bg); border: 1px solid #BFDBFE;
      border-radius: 8px; font-size: 12px; font-weight: 500; color: var(--blue-text);
      cursor: pointer;
    }

    .limit-select {
      display: flex; align-items: center; gap: 4px;
      height: 30px; padding: 0 10px;
      background: var(--bg-page); border: 1px solid var(--border);
      border-radius: 8px; font-size: 12px; color: #374151; cursor: pointer;
    }

    .run-btn {
      display: flex; align-items: center; gap: 6px;
      height: 32px; padding: 0 14px;
      background: var(--accent-blue); color: #fff;
      border: none; border-radius: 8px;
      font-family: 'Inter', sans-serif; font-size: 13px; font-weight: 700;
      cursor: pointer; transition: background 0.12s;
    }
    .run-btn:hover { background: #1D4ED8; }

    /* Code editor area – contenteditable, auto horizontal expand */
    .code-editor-wrap {
      flex-shrink: 0;
      background: #0F172A;
      height: 260px;
      overflow: auto;          /* scrolls both axes if content overflows */
      display: flex;
    }
    /* Gutter with line numbers */
    .line-gutter {
      padding: 20px 12px 20px 20px;
      display: flex; flex-direction: column; gap: 0;
      user-select: none;
      color: #475569;
      font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.8;
      text-align: right;
      min-width: 40px;
      flex-shrink: 0;
      border-right: 1px solid #1E293B;
    }
    /* Actual editable code area */
    .code-editor {
      flex: 1;
      padding: 20px 20px 20px 16px;
      outline: none;
      caret-color: #60A5FA;
      font-family: 'Courier New', monospace; font-size: 13px; line-height: 1.8;
      color: #E2E8F0;
      white-space: pre;         /* no word-wrap; grows horizontally */
      min-width: max-content;  /* container expands to fit content width */
      tab-size: 4;
      -moz-tab-size: 4;
    }
    .kw { color: #93C5FD; }
    .fn { color: #86EFAC; }

    /* Results area */
    .results-panel { flex: 1; display: flex; flex-direction: column; overflow: hidden; }
    .results-toolbar {
      height: 44px; padding: 0 16px;
      display: flex; align-items: center; justify-content: space-between;
      background: var(--bg-page); border-bottom: 1px solid var(--border);
      flex-shrink: 0;
    }
    .results-meta { font-size: 12px; color: var(--text-muted); }
    .results-table-wrap { flex: 1; overflow: auto; background: #fff; }

    .export-btn {
      display: flex; align-items: center; gap: 4px;
      height: 28px; padding: 0 10px;
      background: var(--slate-bg); border: 1px solid var(--border);
      border-radius: 6px; font-size: 12px; color: #374151; cursor: pointer;
    }